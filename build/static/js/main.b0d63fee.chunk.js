(this["webpackJsonpreact-table"]=this["webpackJsonpreact-table"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),i=(n(14),n(15),n(5)),u=n(6),s=n(8),l=n(7),m="https://recruitment.hal.skygate.io/companies",f="ASC",p=(n(16),function(e){var t=e.type,n=e.fieldName,a=e.handler,c=e.sort,o=t===c;return r.a.createElement("div",{className:"table_row_item "+(o?"active ":"")+(c===f?"asc ":"desc "),"data-type":t,onClick:function(e){return a(e.target.dataset.type)}},n)}),d=function(e){var t=e.handler,n=e.data.sortBy,a=function(e){return t(e)};return r.a.createElement("div",{className:"table table_heading"},r.a.createElement("div",{className:"table_row"},r.a.createElement(p,{sort:n,type:"ID",fieldName:"ID",handler:a}),r.a.createElement(p,{sort:n,type:"NAME",fieldName:"Name",handler:a}),r.a.createElement(p,{sort:n,type:"CITY",fieldName:"City",handler:a}),r.a.createElement(p,{sort:n,type:"TOTAL_INCOME",fieldName:"Total Income",handler:a}),r.a.createElement(p,{sort:n,type:"AVERAGE_INCOME",fieldName:"Average Income",handler:a}),r.a.createElement(p,{sort:n,type:"LAST_MONTH_INCOME",fieldName:"Last month income",handler:a})))},h=(n(17),function(e){var t=e.data,n=e.handler,a=t.currentPage,c=t.filteredCompaniesAmount/t.companiesPerPage,o=[],i=function(e){var t=Number(e.target.dataset.page);n(t)};return function(){var e=0;do{e++,o.push(r.a.createElement("li",{key:e,"data-page":e,onClick:function(e){return i(e)},className:(e===a?"active ":"")+"pagination_item"},e))}while(e<=c-1);return r.a.createElement("ul",{className:"pagination"},o)}()}),v=n(1),E=n.n(v),y=n(2),g=function(e){return e.incomes.map((function(e){return e.value}))},C=function(e){return g(e).reduce((function(e,t){return parseInt(e)+parseInt(t)}))},b=function(e){var t=g(e);return t.reduce((function(e,n){return Math.floor(parseInt(e)+parseInt(n)/t.length)}))},N=function(e){var t=function(e){return e.incomes.map((function(e){return e.date}))}(e),n=t.sort((function(e,t){return new Date(t.date)-new Date(e.date)}))[t.length-1],a=e.incomes.filter((function(e){return e.date===n}));return Math.floor(a[0].value)};function I(){return w.apply(this,arguments)}function w(){return(w=Object(y.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m).then((function(e){return e.json()}));case 2:return(t=e.sent).sort((function(e,t){return e.id-t.id||e.name.localeCompare(t.name)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return k.apply(this,arguments)}function k(){return(k=Object(y.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(){var e=Object(y.a)(E.a.mark((function e(n){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fetch("".concat("https://recruitment.hal.skygate.io/incomes","/").concat(n.id)).then((function(e){return e.json()})).then((function(e){var a=t,r=e.id,c=a.filter((function(e){return e.id===r}));return c[0].incomes=e.incomes,c[0].calculatedIncomes={total_income:C(n),average_income:b(n),last_month_income:N(n)},c[0]})),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(y.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return t=e.sent,e.next=5,_(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(e){var t=e.data;return r.a.createElement("div",{className:"table_row_item income"},t)},O=(n(19),function(e){var t=e.data;return function(){var e=t.id,n=t.name,a=t.city,c=t.calculatedIncomes,o=c.total_income,i=c.average_income,u=c.last_month_income;return r.a.createElement("div",{className:"table_row",key:e},r.a.createElement(S,{data:e}),r.a.createElement(S,{data:n}),r.a.createElement(S,{data:a}),r.a.createElement(S,{data:o}),r.a.createElement(S,{data:i}),r.a.createElement(S,{data:u}))}()}),T=function(e){var t=e.data;return r.a.createElement("div",{className:"table"},t.map((function(e){return r.a.createElement(O,{key:e.id,data:e})})))},A=(n(20),n(21),function(e){var t=e.handler;return r.a.createElement("select",{className:"table_amountbox",onChange:function(e){return t(e.target.value)}},r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"70"},"75"),r.a.createElement("option",{value:"100"},"100"))}),D=(n(22),function(e){var t=e.handler;return r.a.createElement("input",{type:"text",className:"table_searchbox",placeholder:"Search...",onChange:function(e){return t(e.target.value)}})}),M=(n(23),function(){return r.a.createElement("div",{className:"refreshWrapper"},r.a.createElement("div",{className:"refresh"}))}),x=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onChangeInput=function(e){return a.setState({searchValue:e},(function(){return a.setDisplayedContent()}))},a.onChangeSelect=function(e){return a.setState({companiesPerPage:parseInt(e),currentPage:1},(function(){return a.setDisplayedContent()}))},a.onClickPagination=function(e){return a.setState({currentPage:e},(function(){return a.setDisplayedContent()}))},a.onClickTableHeadingSortItems=function(e){var t=a.state,n=t.sortBy,r=t.sortType,c=t.companies,o=e.toLowerCase();"ID"===e&&function(e,t,n,a,r){e.sort((function(e,c){return t!==r||"DESC"===n?e[a]-c[a]:t===r&&n===f?c[a]-e[a]:void 0}))}(c,n,r,o,e),"NAME"!==e&&"CITY"!==e||function(e,t,n,a,r){t===r&&"DESC"!==n||e.sort((function(e,t){return e[a]>t[a]?1:t[a]>e[a]?-1:0})),t===r&&n!==f||e.sort((function(e,t){return e[a]>t[a]?1:t[a]>e[a]?-1:0})).reverse()}(c,n,r,o,e),"TOTAL_INCOME"!=e&&"AVERAGE_INCOME"!==e&&"LAST_MONTH_INCOME"!==e||function(e,t,n,a,r){e.sort((function(e,c){return t!==r||"DESC"===n?e.calculatedIncomes[a]-c.calculatedIncomes[a]:t===r&&n===f?c.calculatedIncomes[a]-e.calculatedIncomes[a]:void 0}))}(c,n,r,o,e),a.setState({sortType:r===f?"DESC":f,sortBy:e},(function(){return a.setDisplayedContent()}))},a.setDisplayedContent=function(){var e=a.state,t=function(e,t,n,a){var r=(t-1)*a,c=r+a,o={};return e.length>0?(o.list=n.filter((function(t){return Object.keys(t).some((function(n){if("id"===n||"name"===n||"city"===n)return t[n].toString().toLowerCase().includes(e.toLowerCase())}))})),o.amount=o.list.length,o.list=o.list.slice(r,c)):(o.list=n.slice(r,c),o.amount=n.length),o}(e.searchValue,e.currentPage,e.companies,e.companiesPerPage);a.setState({displayedContent:t.list,filteredCompaniesAmount:t.amount})},a.state={searchValue:"",currentPage:1,companies:[],companiesPerPage:25,displayedContent:[],filteredCompaniesAmount:0,sortBy:"ID",sortType:f},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(){return P.apply(this,arguments)})().then((function(t){return e.setState({companies:t,displayedContent:t})})).then((function(){return e.setDisplayedContent()}))}},{key:"render",value:function(){var e=this.onClickPagination,t=this.onChangeSelect,n=this.onClickTableHeadingSortItems,a=this.onChangeInput,c=this.state,o=c.currentPage,i=c.displayedContent,u=c.filteredCompaniesAmount,s=c.companiesPerPage,l=c.sortBy,m=c.sortType;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table_wrapper"},r.a.createElement(d,{data:{sortBy:l,sortType:m},handler:n}),r.a.createElement(D,{handler:a}),r.a.createElement(A,{handler:t}),0===this.state.companies.length?r.a.createElement(M,null):r.a.createElement(T,{data:i})),r.a.createElement(h,{data:{currentPage:o,filteredCompaniesAmount:u,companiesPerPage:s},handler:e}))}}]),n}(a.Component),j=function(){return r.a.createElement("div",{className:"app_wrapper"},r.a.createElement("h1",null,"Check out best companies!"),r.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.b0d63fee.chunk.js.map